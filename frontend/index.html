<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Simple Product Search</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 40px; background: #f6f6f6; }
        #search-bar { width: 400px; padding: 10px; font-size: 16px; }
        #search-btn { padding: 10px 20px; font-size: 16px; }
        #results { margin-top: 30px; }
        .result { background: #fff; padding: 15px; margin-bottom: 12px; border-radius: 8px; }
        .source { font-size: 13px; color: #888; }
    </style>
</head>
<body>
    <h2>Product Search</h2>
    <input type="text" id="search-bar" placeholder="Enter product name...">
    <button id="search-btn">Search</button>
    <div id="results"></div>

    <script>
        document.getElementById("search-btn").onclick = async function() {
            const query = document.getElementById("search-bar").value.trim();
            if (!query) return;
            document.getElementById("results").innerHTML = "<em>Searching...</em>";
            const response = await fetch("/search", {
                method: "POST",
                headers: {"Content-Type": "application/json"},
                body: JSON.stringify({query})
            });
            const data = await response.json();
            const resultsDiv = document.getElementById("results");
            if (!data.results || data.results.length === 0) {
                resultsDiv.innerHTML = "<strong>No results found.</strong>";
                return;
            }
            resultsDiv.innerHTML = "";
            data.results.forEach(result => {
                const div = document.createElement("div");
                div.className = "result";
                div.innerHTML = `<a href="${result.url}" target="_blank"><strong>${result.title}</strong></a><br>
                    <span class="snippet">${result.snippet}</span><br>
                    <span class="source">${result.url}</span>`;
                resultsDiv.appendChild(div);
            });
        };
    </script>
</body>
</html>
